(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(49),s=n.n(o),r=n(5),l=n(6),c=n(8),h=n(7),u=n(9),d=n(11),m=n(17),O=n.n(m),f=n(50),p=n(51),g=n.n(p),v=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).slaveChannel=O()("/slaveChannel"),e.state={id:g.a.load("token")},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("my state:  "+JSON.stringify(this.state)),this.slaveChannel.emit("slaveJoin",this.state),this.slaveChannel.on("setState",(function(t){console.log(JSON.stringify(t)),e.setState(t)}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(f.Helmet,null,i.a.createElement("style",null,"body {background-color: ".concat(this.state.color,"; }"))),i.a.createElement("h1",null,"Thanks!"))}}]),t}(i.a.Component),w=n(3),S=n(52),y=n.n(S).a.create("penocw04.student.cs.kuleuven.be"),b=(n(114),function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(h.a)(t).call(this))).send=e.send.bind(Object(w.a)(e)),e.no=e.no.bind(Object(w.a)(e)),e.yes=e.yes.bind(Object(w.a)(e)),e.getOS=e.getOS.bind(Object(w.a)(e)),e.handleChange=e.handleChange.bind(Object(w.a)(e)),e.state={OS:"",Browser:"",diffWTA:0,latency:0,KULNetwork:!1,toEnd:!1,adjustedLatency:!1,chosen:!1},e.loginChannel=O()("/loginChannel"),y.get("/login").then((function(e){})),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getOS",value:function(){return this.OSName="",-1!==navigator.appVersion.indexOf("Mobile")?(-1!==navigator.appVersion.indexOf("iPhone")&&(this.OSName="IOS"),-1!==navigator.appVersion.indexOf("Android")&&(this.OSName="Android")):(-1!==navigator.appVersion.indexOf("X11")&&(this.OSName="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(this.OSName="Linux"),-1!==navigator.appVersion.indexOf("Mac")&&(this.OSName="MacOS"),-1!==navigator.appVersion.indexOf("Win")&&(this.OSName="Windows")),this.OSName}},{key:"getBrowser",value:function(){return this.BrowserVersion="",-1!==navigator.appVersion.indexOf("Opera")?this.BrowserVersion="Opera":-1!==navigator.appVersion.indexOf("Edge")?this.BrowserVersion="Edge":-1!==navigator.appVersion.indexOf("Chrome")?this.BrowserVersion="Chrome":-1!==navigator.appVersion.indexOf("Safari")?this.BrowserVersion="Safari":-1!==navigator.appVersion.indexOf("FireFox")?this.BrowserVersion="FireFox":-1!==navigator.appVersion.indexOf("MSIE")?this.BrowserVersion="Internet Explorer":-1!==navigator.appCodeName.indexOf("Mozilla")&&(this.BrowserVersion="Firefox"),this.BrowserVersion}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){e.startTime=Date.now(),console.log("made this.startTime: "+e.startTime),e.loginChannel.emit("a")}),2e3),this.loginChannel.on("b",(function(){var t=Date.now();console.log("this.startTime: "+e.startTime),console.log("date.now: "+t),e.totalLatency=Date.now()-e.startTime,e.state.adjustedLatency?e.setState({latency:.5*e.state.latency+.5*e.totalLatency/2}):e.setState({latency:e.totalLatency/2,adjustedLatency:!0})})),this.loginChannel.on("a",(function(){return console.log("a")}));var t=this.getOS();console.log("OS: "+t),this.setState({OS:t});var n=this.getBrowser();console.log("browser: "+n),this.setState({Browser:n});var a=new XMLHttpRequest;a.open("GET","http://worldtimeapi.org/api/ip",!0),a.send(),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var e=JSON.parse(a.responseText),t=new Date(e.datetime),n=(new Date-t)/1e3;console.log(n),this.setState({diffWTA:n})}}.bind(this),this.loginChannel.on("setState",(function(t){console.log(JSON.stringify(t)),e.setState(t)})),this.setState({OS:this.OSName}),this.setState({Browser:this.BrowserVersion})}},{key:"send",value:function(){this.loginChannel.emit("userData",{OS:this.state.OS,Browser:this.state.Browser,diffWTA:this.state.diffWTA,KULNetwork:this.state.KULNetwork,latency:this.state.latency,clientTime:(new Date).getTime()}),this.setState({toEnd:!0})}},{key:"yes",value:function(){this.setState({KULNetwork:!0,chosen:!0})}},{key:"no",value:function(){this.setState({KULNetwork:!1,chosen:!0})}},{key:"handleChange",value:function(e){this.setState({KULNetwork:e.target.value})}},{key:"render",value:function(){return!0===this.state.toEnd?i.a.createElement(d.b,{to:"/slave"}):i.a.createElement("div",null,i.a.createElement("ul",null,i.a.createElement("li",null," ","Your OS: "+this.state.OS," "),i.a.createElement("li",null," ","Your browser: "+this.state.Browser," "),i.a.createElement("li",null," ","Your latency: "+this.state.latency," "),i.a.createElement("li",null,"  ","Time difference with WTA: "+this.state.diffWTA," ")),i.a.createElement("div",null,i.a.createElement("h3",{hidden:this.state.chosen},"Are you currently connected to the KUL network?"),i.a.createElement("button",{hidden:this.state.chosen,name:"yes",onClick:this.yes},"Yes"),i.a.createElement("button",{hidden:this.state.chosen,name:"no",onClick:this.no},"No")),i.a.createElement("div",null,i.a.createElement("h3",null,"Thank You"),i.a.createElement("button",{name:"send",onClick:this.send,disabled:!this.state.chosen},"Send"),i.a.createElement("div",{hidden:this.state.chosen},"Please indicate whether you are on a KUL network or not.")))}}]),t}(i.a.Component)),E=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("main",null,i.a.createElement(d.a,null,i.a.createElement(d.d,null,i.a.createElement(d.c,{exact:!0,path:"/",component:b}),i.a.createElement(d.c,{path:"/slave",component:v}))))}}]),t}(i.a.Component);n(117),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},55:function(e,t,n){e.exports=n(118)},88:function(e,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.c3a0fab7.chunk.js.map