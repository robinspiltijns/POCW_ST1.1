(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(t,e,n){},118:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(49),r=n.n(o),s=n(3),c=n(4),l=n(6),u=n(5),m=n(7),f=n(11),h=n(17),g=n.n(h),b=n(50),d=n(51),v=n.n(d),y=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).slaveChannel=g()("/slaveChannel"),t.state={id:v.a.load("token")},t}return Object(m.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;console.log("my state:  "+JSON.stringify(this.state)),this.slaveChannel.emit("slaveJoin",this.state),this.slaveChannel.on("setState",(function(e){console.log(JSON.stringify(e)),t.setState(e)}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(b.Helmet,null,i.a.createElement("style",null,"body {background-color: ".concat(this.state.color,"; }"))),i.a.createElement("h1",null,"Thanks! You can close this page now."))}}]),e}(i.a.Component),O=n(2),p=n(52),A=(n.n(p).a.create("penocw04.student.cs.kuleuven.be"),n(114),function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvasRef=i.a.createRef(),n}return Object(m.a)(e,t),Object(c.a)(e,[{key:"componentDidUpdate",value:function(){var t=this.props.angle,e=this.canvasRef.current,n=e.getContext("2d"),a=e.width,i=e.height;n.save(),n.beginPath(),n.clearRect(0,0,a,i),n.translate(a/2,i/2),n.rotate(t*Math.PI/180),n.fillStyle=t>90&&t<270?"RED":"#4397AC",n.fillRect(-a/4,-i/4,a/2,i/2),n.restore(),n.font="40px Arial",n.fillText(t.toString(),0,150)}},{key:"render",value:function(){return i.a.createElement("canvas",{width:"300",height:"300",ref:this.canvasRef})}}]),e}(i.a.Component)),k=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={angle:0,frame:0},n.updateAnimationState=n.updateAnimationState.bind(Object(O.a)(n)),n.fpsAnimation=n.fpsAnimation.bind(Object(O.a)(n)),n.reset=n.reset.bind(Object(O.a)(n)),n}return Object(m.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.fpsAnimation()}},{key:"fpsAnimation",value:function(){var t=this;setInterval((function(){t.props.running&&t.setState((function(t){return{angle:(t.angle+1)%360,frame:t.frame+1}}))}),16)}},{key:"updateAnimationState",value:function(){this.setState((function(t){return{angle:t.angle+1}})),this.rAF=requestAnimationFrame(this.updateAnimationState)}},{key:"reset",value:function(){this.setState({angle:0,frame:0})}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rAF)}},{key:"getFrame",value:function(){return this.state.frame}},{key:"render",value:function(){return i.a.createElement(A,{angle:this.state.angle})}}]),e}(i.a.Component),j=0,C=0,E=500,w=function(t){function e(){var t;return Object(s.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).sendA=t.sendA.bind(Object(O.a)(t)),t.start=t.start.bind(Object(O.a)(t)),t.toggleAnimation=t.toggleAnimation.bind(Object(O.a)(t)),t.syncAnimation=t.syncAnimation.bind(Object(O.a)(t)),t.resetAnimation=t.resetAnimation.bind(Object(O.a)(t)),t.getCurrentFrame=t.getCurrentFrame.bind(Object(O.a)(t)),t.canvas=i.a.createRef(),t.animation=i.a.createRef(),t.state={animate:!1,backgroundColor:"WHITE",offset:0,OS:"",Browser:"",latency:0,toEnd:!1,browserDimensions:[window.innerWidth,window.innerHeight]},t.loginChannel=g()("/loginChannel"),t}return Object(m.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.offset=0,this.sendA(),this.loginChannel.on("b",(function(e){var n=Date.now();t.latency=(n-t.startTime)/2,t.currentOffset=n-e-t.latency,++j>10&&(t.offset=(C*t.offset+t.currentOffset)/(C+1),C++),t.setState({offset:t.offset}),E=20*t.latency})),this.loginChannel.on("go",(function(e){t.setState({backgroundColor:"GREEN"}),console.log("date: "+e),console.log("offset: "+t.state.offset),console.log("now: "+Date.now()),console.log("total: "+e-t.state.offset-Date.now()),setTimeout((function(){t.setState({backgroundColor:"BLUE"})}),e+t.state.offset-Date.now())})),this.loginChannel.on("startAnimation",(function(e){t.resetAnimation(),setTimeout((function(){t.setState({animate:"true"})}),e+t.state.offset-Date.now())})),this.loginChannel.on("requestCurrentFrame",(function(){console.log(t.animation.current.getFrame())}))}},{key:"sendA",value:function(){var t=this;setTimeout((function(){t.startTime=Date.now(),t.loginChannel.emit("a"),t.sendA()}),E)}},{key:"start",value:function(){this.loginChannel.emit("start")}},{key:"toggleAnimation",value:function(){this.setState((function(t){return{animate:!t.animate}}))}},{key:"syncAnimation",value:function(){this.loginChannel.emit("requestAnimation")}},{key:"getCurrentFrame",value:function(){}},{key:"resetAnimation",value:function(){this.state.animate=!1,this.animation.current.reset()}},{key:"render",value:function(){return!0===this.state.toEnd?i.a.createElement(f.b,{to:"/slave"}):i.a.createElement("div",{style:{backgroundColor:this.state.backgroundColor,height:1e3}},i.a.createElement("div",null,this.state.offset),i.a.createElement("div",null,i.a.createElement("button",{onClick:this.start}," START "),i.a.createElement("button",{onClick:this.toggleAnimation},"Toggle Animation"),i.a.createElement("button",{onClick:this.syncAnimation},"Sync Animation"),i.a.createElement("button",{onClick:this.resetAnimation},"Reset Animation")),i.a.createElement(k,{ref:this.animation,running:this.state.animate}))}}]),e}(i.a.Component),S=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement("main",null,i.a.createElement(f.a,null,i.a.createElement(f.d,null,i.a.createElement(f.c,{exact:!0,path:"/",component:w}),i.a.createElement(f.c,{path:"/slave",component:y}))))}}]),e}(i.a.Component);n(117),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},55:function(t,e,n){t.exports=n(118)},88:function(t,e){}},[[55,1,2]]]);
//# sourceMappingURL=main.2e8b9fc9.chunk.js.map